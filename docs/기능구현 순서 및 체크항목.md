# 기능 구현 순서 및 체크 항목

## 1. 공통 플랫폼 기반 구축

### 상세 기능 파악 질문 단계
**구현 전 필수 질문사항:**
- 데이터베이스 스키마에서 공통 엔티티(기업, 사용자, 프로젝트)의 필수 필드가 무엇인가?
- tenant_id와 UUID v7 정책을 어떻게 구현할 것인가?
- RLS(행 단위 보안) 정책을 어떤 테이블에 어떻게 적용할 것인가?
- 공통 라이브러리에서 제공할 기능이 무엇인가? (예: 예외처리, 로깅, 테넌트 컨텍스트)
- 환경별 설정 관리 방식은? (development, staging, production)
- 로그 레벨과 기록 형식은 어떻게 할 것인가?

**구현 순서**
- 데이터베이스 스키마와 공통 라이브러리 구조를 설계하고 확정한다 (참조: `docs/PRD.md`의 7장 데이터 모델)
- 공통 설정(`shared/common-libs`, `shared/database`)과 로컬/배포용 환경 변수를 정의한다
- 관측성(로그, 트레이싱)과 에러 규격을 수립한다 (참조: `docs/PRD.md`의 3장 API 원칙)

**체크 항목**
- [ ] 필수 엔터티에 `tenant_id`와 인덱스가 적용되었는지 확인 (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:48`).
- [ ] 공통 환경 변수와 시크릿이 문서화되었는지 확인 (참조: `docs/DEV_SETUP_GUIDE.md:117`).
- [ ] 헬스체크 및 로깅 포맷이 서비스 간 일치하는지 확인 (참조: `README.md:55`).

## 2. 인증 · 계정 · 보안 계층

### 상세 기능 파악 질문 단계
**구현 전 필수 질문사항:**
- JWT 토큰 구성에 포함될 클레임이 무엇인가? (tenant_id, roles, user_id, expires_at)
- 패스워드 보안 정책은? (최소 길이, 복잡도, 만료)
- 소셜 로그인 제공업체는? (Google, Kakao, Naver, Facebook 중 어느 것부터?)
- MFA(다인자 인증) 방식은? (SMS, Email, TOTP 앱?)
- 세션 처리 방식은? (서버 세션 vs JWT 만료 처리)
- 권한 관리 도메인은 어떻게 정의할가? (예: user:read, project:write, admin:all)
- 사용자 등록 프로세스에서 이메일 인증이 필요한가?

**구현 순서**
- Auth Service에서 사용자 등록, 로그인, JWT 발급 로직을 구현한다 (참조: `docs/PRD.md`의 2.1장 Auth/Identity Service)
- RBAC/ABAC 정책과 MFA, SSO 연동 스텀을 추가한다 (참조: `docs/PRD.md`의 14장 권한 모델)
- 인증 미들웨어를 Gateway에 연결하고 표준 에러 응답을 정의한다

**체크 항목**
- [ ] JWT 만료·리프레시 정책이 적용되고 로그아웃/세션 무효화가 동작하는가? (참조: `README.md:127`).
- [ ] 주요 인증 경로에 대한 단위/통합 테스트가 작성되었는가? (참조: `docs/DEVELOPMENT_CHECKLIST.md:88`).
- [ ] 보안 감사 로그 및 실패 이벤트가 기록되는가? (참조: `docs/DEVELOPMENT_CHECKLIST.md:109`).

## 3. 테넌트 · 조직 · 프로젝트 관리
**구현 순서**
- Tenant/Org Service에서 조직/사용자 소속 CRUD와 검증을 구현한다 (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:69`).
- 프로젝트 생성 시 서브도메인/프로젝트 코드 규칙을 적용한다 (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:29`).
- RLS 및 컨텍스트 주입을 통한 데이터 격리를 검증한다 (참조: `README.md:134`).

**체크 항목**
- [ ] 프로젝트 코드와 커스텀 도메인 중복 검사 로직이 동작하는가? (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:29`).
- [ ] 테넌트 경계가 API·DB·캐시 계층에서 모두 적용되는가? (참조: `README.md:134`).
- [ ] 조직/사용자 변경이 감사 로그 및 알림에 반영되는가? (참조: `docs/DEVELOPMENT_CHECKLIST.md:434`).

## 4. Gateway 라우팅 및 서비스 통합
**구현 순서**
- Node Gateway에서 서비스별 프록시 경로(`/api/v1/*`)를 연결한다 (참조: `WARP.md:47`).
- 멀티테넌트 헤더(`X-Tenant-Id`, `X-Project-Code`)를 주입/검증한다 (참조: `WARP.md:58`).
- Circuit breaker, rate limit 등 공통 미들웨어를 구성한다 (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:69`).

**체크 항목**
- [ ] 각 서비스 헬스 엔드포인트가 Gateway 상태 페이지에 노출되는가? (참조: `README.md:55`).
- [ ] 오류 변환 및 표준 에러 코드를 반환하는가? (참조: `WARP.md:61`).
- [ ] 부하·장애 시 페일오버/타임아웃 정책이 동작하는가? (참조: `docs/DEVELOPMENT_CHECKLIST.md:398`).

## 5. 공용 포털 · 브랜드 커스터마이징
**구현 순서**
- Public Portal에서 기본 로그인/비밀번호 재설정 플로우를 구현한다 (참조: `README.md:55`).
- 프로젝트별 브랜드 리소스(로고, 컬러, 카피)를 적용하는 관리 UI를 구축한다 (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:86`).
- 다국어 리소스 로딩과 실시간 전환을 지원한다 (참조: `README.md:141`).

**체크 항목**
- [ ] 기본·프로젝트별 로그인 화면이 요구 사양과 일치하는가? (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:86`).
- [ ] 접근성 지표(WCAG 2.1 AA)가 충족되는가? (참조: `docs/DEVELOPMENT_CHECKLIST.md:57`).
- [ ] 주요 언어(KO/EN) 전환 시 번역 키가 누락되지 않는가? (참조: `README.md:141`).

## 6. PMIS 협업 핵심 기능(MVP)

### 상세 기능 파악 질문 단계
**구현 전 필수 질문사항:**
- 공지사항 기능: 분류, 중요도, 첨부파일, 대상 사용자 지정 방식은?
- 업무요청 시스템: 오전 타입(요청/장애/문의), 상태 관리(접수/진행/완료), 담당자 지정 방식은?
- 자유게시판: 카테고리, 댓글, 좋아요, 파일 첨부 지원 여부는?
- 연락망/조직도: 계층 구조, 외부 디렉토리 연동, 검색 기능은?
- 달력/일정: 전체/개인 일정 구분, 반복 일정, 알림 설정은?
- 대시보드: 어떤 지표와 차트(프로젝트 진도, 업무 현황, KPI)를 표시할가?
- 알림 시스템: 인앱/이메일/SMS, 알림 설정 개인화는?

**구현 순서**
- PMIS-Collab Service에서 공지, 업무요청, 커뮤니케이션 기능을 구현한다 (참조: `docs/PRD.md`의 2.2장 PMIS 패키지)
- 문서 링크/결재 연계와 파일 업로드를 통합한다 (참조: `docs/PRD.md`의 File/DMS Core Service)
- 프론트엔드에서 업무 보드와 실시간 알림을 연결한다

**체크 항목**
- [ ] 업무 생성·배정·상태 변경 풀사이클이 동작하는가? (참조: `docs/DEVELOPMENT_CHECKLIST.md:72`).
- [ ] 파일/DMS 연계 시 권한 검증과 감사 로그가 남는가? (참조: `docs/DEVELOPMENT_CHECKLIST.md:109`).
- [ ] 주요 플로우에 대한 UI/UX 테스트가 완료되었는가? (참조: `docs/DEVELOPMENT_CHECKLIST.md:32`).

## 7. 과금 · 사용량 · 알림(선택적 MVP+)
**구현 순서**
- 사용량 측정 이벤트와 Billing Service 통합을 설계한다 (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:5`).
- Notification Service와 이메일/SMS 템플릿을 구성한다 (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:69`).
- 구독/인보이스 API와 관리자 대시보드를 구현한다 (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:83`).

**체크 항목**
- [ ] 사용량 이벤트가 테넌트별로 정확히 집계되는가? (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:49`).
- [ ] 청구서/알림 템플릿이 다국어와 브랜드 정책을 따른다 (참조: `docs/ROIPLATFORM_PRD_multitenant_MSA_v2.0.md:86`).
- [ ] 결제/청구 관련 보안·감사 요구사항이 충족되는가? (참조: `docs/DEVELOPMENT_CHECKLIST.md:109`).

## 8. 통합 품질 검증 및 배포 준비

### 상세 기능 파악 질문 단계
**구현 전 필수 질문사항:**
- 테스트 커버리지 목표는? (단위 테스트 80%, 통합 테스트 60%)
- E2E 테스트에서 검증할 핵심 사용자 시나리오는?
- 성능 테스트 기준은? (동시 사용자 수, 응답 시간)
- 보안 취약점 스캔 도구와 기준은?
- 배포 환경 구성은? (Docker, Kubernetes, CI/CD 파이프라인)
- 롤백 전략과 비상 계획은?
- 모니터링 대상 메트릭과 알림 임계치는?

**구현 순서**
- 통합 테스트, 계약 테스트, E2E 테스트를 실행하고 커버리지를 검토한다
- 배포 자동화 스크립트와 롤백 전략을 확정한다 (참조: `docs/PRD.md`의 10장 NFR·운영)
- 운영/지원 문서를 갱신하고 인수인계한다

**체크 항목**
- [ ] 모든 체크리스트 항목이 녹색 상태로 마무리되었는가?
- [ ] 배포 환경 변수와 시크릿 검증이 끝났는가?
- [ ] 모니터링/알림이 실제 배포 환경에 연결되었는가?

---

## 기능 구현 가이드라인

### 질문 단계 진행 방식
1. **각 기능 구현 전**, 해당 섹션의 "상세 기능 파악 질문 단계"를 **의뢰처와 논의**하여 요구사항을 명확히 한다.
2. **모든 질문에 대한 답변이 확정된 후**에만 구현을 시작한다.
3. **구현 중** 추가 질문이 발생하면 즉시 획업자에게 확인한다.

### 체크항목 진행 방식
1. **각 기능 구현 완료 후**, 해당 섹션의 체크항목을 **순차적으로 검증**한다.
2. **모든 체크항목이 통과된 후**에만 다음 단계로 진행한다.
3. **체크항목 실패 시** 원인을 분석하고 수정 후 재검증한다.

### 참고 문서 연결
- **PRD**: `docs/PRD.md` - 전체 제품 요구사항 및 아키텍처
- **개발가이드**: `docs/DEVELOPMENT_CHECKLIST.md` - 상세 개발 체크리스트
- **환경설정**: `docs/DEV_SETUP_GUIDE.md` - 개발 환경 구성 가이드
- **한국어 가이드**: `docs/KOREAN_GUIDELINES.md` - 문서 작성 표준
